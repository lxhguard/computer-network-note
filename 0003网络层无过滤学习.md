# 网络层无过滤学习

## 一。概述

<img src="./img/网络层.jpg"/>

- 路由器作用：将数据报从入链路转发到出链路
- 路由器不运行应用层和传输层协议

- 网络层的功能：转发，路由选择，连接建立
- ｜    转发：当一个分组到达路由器当一条输入链路时，路由器必须将该分组移动到适当的输出链路。
- ｜    路由选择：当分组从发送方流向接收方时，网络层必须决定这些分组所采用的路由或路径。计算这些路径的算法被成为路由选择算法。
- ｜    连接建立：
- ｜PS：转发是路由器本地动作，路由选择是指网络过程的范围。
- 如何转发？路由器根据分组首部字段的值，在其转发表中索引查询，找到输出链路接口。
- 转发涉及到分组交换机，分组交换机（2类）：链路层分组交换机，路由器。
- ｜    链路层分组交换机：基于【链路层】字段中的值做转发决定。
- ｜    路由器：基于【网络层】字段中的值做转发决定。
- 网络服务模型：定义了分组在发送与接收端系统之间的端到端运输特性。
- 网络服务模型类别：尽力而为服务（best-effort service），ATM网络服务 等等
- （理想） 网络层提供的特定服务：确保交付、具有时延上界的确保交付、有序分组交付、确保最小带宽、确保最大时延抖动、安全性服务
  
### 1.虚电路和数据报网络

- 前言：他们是计算机网络的两种基本类型。
- 虚电路网络：仅在网络层提供【连接】服务的计算机网络，如ATM
- 数据报网络：仅在网络层提供【无连接】服务的计算机网络
- 区别：在作出转发决定时，使用不同信息。前者需要路由器维护连接状态信息，后者不需要。
- PS：后者会维护转发表中的 转发状态信息。通常每1-5分钟奉新一次转发表。其更新是根据路由选择算法修改的。

- 一条虚电路组成：1.源和目的主机之间的路径 2.VC号(每条链路都有一个号码，跟转发表同表) 3.转发表表项
- 虚电路的三个阶段：虚电路建立、数据传送、虚电路拆除
- **网络层的虚电路建立 与 传输层的连接建立 区别：前者涉及两个端系统及其 之间路径上的路由器，每台路由器都完全知道经过他的所有虚电路；后者仅涉及两个端系统，端系统决定连接参数，路由器不知情。
  
- 数据报网络： 路由器转发表：目的地址 映射 链路接口
- 路由器使用最长前缀匹配规则。

### 2.历史

- 虚电路的概念来源于电话界，它采用了真正的电路。
- 因特网作为一种数据报网络，是由将计算机连接在一起的需求发展而来的。由于端系统设备复杂的多，因特网架构师们选择使网络层服务模型尽可能简单。